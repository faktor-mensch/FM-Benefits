<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Deine persönlichen Vorteile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
:root{
  --bg-start:#0b1230; --bg-end:#0e204a;
  --card-bg:#0f1738; --card-elev:#121c42;
  --text:#e9ecf6; --text-dim:#b9c0d6;
  --chip:#1a2558; --ok:#2bd4a7;
  --border: rgba(255,255,255,.08);
  --ring: rgba(157,76,255,.35);
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --shadow-soft: 0 6px 18px rgba(0,0,0,.28);
}
*{box-sizing:border-box}
html{min-height:100%}
body{min-height:100vh}
body{
  margin:0; font:16px/1.5 Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
  background:
    repeating-linear-gradient(-15deg, transparent 0 28px, rgba(255,255,255,.035) 28px 29px),
    radial-gradient(1200px 600px at 20% -10%, rgba(157,76,255,.18), transparent 45%),
    radial-gradient(900px 500px at 80% 120%, rgba(43,212,167,.12), transparent 45%),
    linear-gradient(180deg, var(--bg-start), var(--bg-end));
}
.container{ max-width:1080px; margin-inline:auto; padding:28px 20px 56px; }
.page-kicker{
  display:inline-flex; align-items:center; gap:10px;
  background:rgba(255,255,255,.06); border:1px solid var(--border);
  padding:8px 12px; border-radius:999px; font-weight:600; letter-spacing:.2px;

}
h1{ margin:16px 0 6px; font-size:clamp(28px,4vw,48px); line-height:1.1; letter-spacing:.2px }
.subtitle{ color:var(--text-dim); max-width:840px; margin-bottom:22px }
.more-coming{ text-align:center; margin:32px 0 }

a{
  color: #fff;
  text-decoration: none;
}

/* Card */
.card{
  background:linear-gradient(180deg,var(--card-bg),var(--card-elev));
  border:1px solid #c40059; border-radius:24px; box-shadow:var(--shadow); overflow:hidden;
}
.card__hd{
  display:grid; grid-template-columns:1fr auto; gap:16px;
  padding:22px 24px; border-bottom:1px solid var(--border);
}
.vendor{ display:flex; align-items:center; gap:14px }
.vendor .badge{ width:44px;height:44px;border-radius:12px;background:#c40059;display:grid;place-items:center;font-weight:800 }
.vendor h3{ margin:0; font-size:22px }
.vendor .sub{ color:var(--text-dim); font-size:14px; margin-top:2px }
.logo{ width:200px;height:65px;border-radius:10px;background:rgba(255,255,255,.08);display:grid;place-items:center;color:var(--text-dim);font-size:13px }

.card__bd{ display:grid; grid-template-columns:1fr auto; gap:22px; padding:22px 24px 26px }
.steps{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:18px; margin-bottom:16px }
.step{ background:rgba(255,255,255,.04); border:1px solid var(--border); border-radius:16px; padding:16px }
.step h4{ margin:0 0 6px; font-size:16px }
.step p{ margin:0; color:var(--text-dim); font-size:14px }

/* Code box – ONE BUTTON */
.code-box{
  display:flex; align-items:center; gap:12px; flex-wrap:wrap;
  background:rgba(255,255,255,.05); border:1px solid var(--border);
  border-radius:18px; padding:10px; box-shadow:var(--shadow-soft) inset;
}
.code{
  flex:1 1 220px; min-height:45px; display:grid; place-items:center;
  font-family: ui-monospace, Menlo, Consolas, "Liberation Mono", monospace;
  font-weight:700; letter-spacing:.25em; text-align:center; user-select:all;
  background:#0c1534; border:1px dashed rgba(255,255,255,.14); border-radius:14px; padding:12px 14px;
}
.btn{
  border:1px solid var(--border); background:#c40059; color:#fff;
  padding:10px 14px; border-radius:12px; font-weight:800; cursor:pointer; transition:.2s ease;
}
.btn[disabled]{ opacity:.6; cursor:not-allowed }
.btn:hover:not([disabled]){ transform:translateY(-1px); box-shadow:0 6px 14px var(--ring) }

.cta{ display:flex; flex-direction:column; align-items:flex-start; gap:10px; min-width:230px }
.btn-primary{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:14px 18px; background:linear-gradient(135deg,#c40059,#ff2d74); color:#fff; font-weight:800;
  border:none; border-radius:16px; cursor:pointer; text-decoration:none;
  box-shadow:0 12px 26px rgba(255,45,116,.35); transition:transform .08s ease, filter .2s ease;
}
.btn-primary:hover{ transform:translateY(-1px); filter:saturate(1.05) }

.note{ color:var(--text-dim); font-size:12px; max-width:260px }
.chips{ display:flex; flex-wrap:wrap; gap:10px; margin-top:10px }
.chip{ background:#1a2558; border:1px solid var(--border); border-radius:999px; padding:8px 12px; font-size:12px; color:var(--text-dim) }
.tip{ color:var(--text-dim); font-size:12px; margin-top:8px }

@media (max-width:860px){
  .card__bd{ grid-template-columns:1fr }
  .cta{ min-width:unset }
}
@media (max-width:620px){
  .steps{ grid-template-columns:1fr }
  .vendor h3{ font-size:20px }
}
  </style>
</head>
<body>
  <div class="container">
    <h2><a href="https://app.faktor-mensch.eu">< Zurück</a></h2>
    <div class="page-kicker">Deine persönlichen Benefits</div>
    <h1>Bleib fit & inspiriert – mit Partnern von<br>FAKTOR MENSCH</h1>
    <p class="subtitle">Unsere Partner geben dir den Extra-Schwung - sichere dir deinen Vorteil.</p>

    <section class="card" data-partner="hummel">
      <header class="card__hd">
        <div class="vendor">
          <div class="badge">FM</div>
          <div>
            <h3>hummel Online-Shop - 25% auf (fast) alles sichern</h3>
            <div class="sub">Exklusiver Vorteil für Versicherte – nur wenige Artikel ausgeschlossen!</div>
          </div>
        </div>
        <div class="logo">
          <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1755182064/hu6639h576-hummel-logo-hummel-logo-vector-eps-382-06-kb-download-2_jgjvky.png" alt="hummel Logo" width="160" />
        </div>
      </header>

      <div class="card__bd">
        <div>
          <div class="steps">
            <div class="step">
              <h4>1. Code sichern</h4>
              <p>Klicke auf „Kopieren“ und füge den Code im Shop ein.</p>
            </div>
            <div class="step">
              <h4>2. Im Warenkorb einlösen</h4>
              <p>Der Rabatt wird an der Kasse automatisch verrechnet.</p>
            </div>
          </div>

          <div class="code-box" role="group" aria-label="Rabattcode">
            <div class="code" aria-live="polite">Noch kein Code geladen</div>
            <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
            <button class="btn" type="button">Code laden</button>
          </div>

          <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

          <div class="chips">
            <span class="chip">FAKTOR MENSCH-Benefit</span>
            <span class="chip">Sport Fashion</span>
          </div>
        </div>

        <div class="cta">
          <a class="btn-primary" href="https://www.hummelsport.de" target="_blank" rel="noopener">Ab zum Shop! ↗</a>
          <div class="note">Hinweis: Der Code wird an der Kasse eingelöst.</div>
        </div>
      </div>
    </section>
    <section class="card" style="margin-top:24px" data-partner="shopneu">
      <header class="card__hd">
        <div class="vendor">
          <div class="badge">FM</div>
          <div>
            <h3>SHOP APOTHEKE - 15% für Neukunden</h3>
            <div class="sub">Exklusiver Vorteil für Versicherte - bei 49€ Mindestbestellwert</div>
          </div>
        </div>
        <div class="logo">
          <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1758281362/shopapo_l30dpt.png" alt="SHOP APOTHEKE Logo" width="180" />
        </div>
      </header>

      <div class="card__bd">
        <div>
          <div class="steps">
            <div class="step">
              <h4>1. Code sichern</h4>
              <p>Klicke auf „Kopieren“ und füge den Code im Portal ein.</p>
            </div>
            <div class="step">
              <h4>2. Im Warenkorb einlösen</h4>
              <p>Der Rabatt wird an der Kasse automatisch verrechnet.</p>
            </div>
          </div>

          <div class="code-box" role="group" aria-label="Rabattcode">
            <div class="code" aria-live="polite">Noch kein Code geladen</div>
            <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
            <button class="btn" type="button">Code laden</button>
          </div>

          <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

          <div class="chips">
            <span class="chip">FAKTOR MENSCH-Benefit</span>
            <span class="chip">Medikamente</span>
          </div>
        </div>

        <div class="cta">
          <a class="btn-primary" href="https://www.shop-apotheke.com/" target="_blank" rel="noopener">Ab zum Shop! ↗</a>
          <div class="note">Hinweis: Der Code wird an der Kasse eingelöst.</div>
        </div>
      </div>
    </section>
<section class="card" style="margin-top:24px" data-partner="shopbestand">
  <header class="card__hd">
    <div class="vendor">
      <div class="badge">FM</div>
      <div>
        <h3>SHOP APOTHEKE - 11% für Bestandskunden</h3>
        <div class="sub">Exklusiver Vorteil für Versicherte - bei 59€ Mindestbestellwert</div>
      </div>
    </div>
    <div class="logo">
      <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1758281362/shopapo_l30dpt.png" alt="SHOP APOTHEKE Logo" width="180" />
    </div>
  </header>

  <div class="card__bd">
    <div>
      <div class="steps">
        <div class="step">
          <h4>1. Code sichern</h4>
          <p>Klicke auf „Kopieren“ und füge den Code in der App ein.</p>
        </div>
        <div class="step">
          <h4>2. Im Warenkorb einlösen</h4>
          <p>Der Rabatt wird an der Kasse automatisch verrechnet.</p>
        </div>
      </div>

      <div class="code-box" role="group" aria-label="Rabattcode">
        <div class="code" aria-live="polite">Noch kein Code geladen</div>
        <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
        <button class="btn" type="button">Code laden</button>
      </div>

      <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

      <div class="chips">
        <span class="chip">FAKTOR MENSCH‑Benefit</span>
        <span class="chip">Medikamente</span>
      </div>
    </div>

    <div class="cta">
      <a class="btn-primary" href="https://www.shop-apotheke.com/" target="_blank" rel="noopener">Ab zum Shop! ↗</a>
      <div class="note">Hinweis: Der Code wird an der Kasse eingelöst.</div>
    </div>
  </div>
</section>
<section class="card" style="margin-top:24px" data-partner="shopeigen">
  <header class="card__hd">
    <div class="vendor">
      <div class="badge">FM</div>
      <div>
        <h3>SHOP APOTHEKE - 20% auf Eigenmarken</h3>
        <div class="sub">Exklusiver Vorteil für Versicherte - mit den Eigenmarken von SHOP APOTHEKE sparen</div>
      </div>
    </div>
    <div class="logo">
      <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1758281362/shopapo_l30dpt.png" alt="SHOP APOTHEKE Logo" width="180" />
    </div>
  </header>

  <div class="card__bd">
    <div>
      <div class="steps">
        <div class="step">
          <h4>1. Code sichern</h4>
          <p>Klicke auf „Kopieren“ und füge den Code im Shop ein.</p>
        </div>
        <div class="step">
          <h4>2. Im Warenkorb einlösen</h4>
          <p>Der Rabatt wird an der Kasse automatisch verrechnet.</p>
        </div>
      </div>

      <div class="code-box" role="group" aria-label="Rabattcode">
        <div class="code" aria-live="polite">Noch kein Code geladen</div>
        <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
        <button class="btn" type="button">Code laden</button>
      </div>

      <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

      <div class="chips">
        <span class="chip">FAKTOR MENSCH‑Benefit</span>
        <span class="chip">Medikamente</span>
      </div>
    </div>

    <div class="cta">
      <a class="btn-primary" href="https://www.shop-apotheke.com/" target="_blank" rel="noopener">Zum Shop ↗</a>
      <div class="note">Hinweis: Der Code wird an der Kasse eingelöst.</div>
    </div>
  </div>
</section>

    <section class="card" style="margin-top:24px" data-partner="partner-a" data-fixed-code="faktormensch16">
      <header class="card__hd">
        <div class="vendor">
          <div class="badge">FM</div>
          <div>
            <h3>MISTER SPEX - 16% auf alle Brillen und Sonnenbrillen</h3>
            <div class="sub">Exklusiver Vorteil für Versicherte - Ab 100€ Mindestbestellwert</div>
          </div>
        </div>
        <div class="logo">
          <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1758893333/mrspex_zfe8yl.png" alt="Mister Spex Logo" width="180" />
        </div>
      </header>

      <div class="card__bd">
        <div>
          <div class="steps">
            <div class="step">
              <h4>1. Code sichern</h4>
              <p>Klicke auf „Kopieren“ und füge den Code im Shop/Portal ein.</p>
            </div>
            <div class="step">
              <h4>2. Vorteil aktivieren</h4>
              <p>Der Rabatt wird an der Kasse oder nach Eingabe automatisch verrechnet.</p>
            </div>
          </div>

          <div class="code-box" role="group" aria-label="Rabattcode">
            <div class="code" aria-live="polite">Noch kein Code geladen</div>
            <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
            <button class="btn" type="button">Code laden</button>
          </div>

          <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

          <div class="chips">
            <span class="chip">FAKTOR MENSCH‑Benefit</span>
            <span class="chip">Sehhilfen</span>
          </div>
        </div>

        <div class="cta">
          <a class="btn-primary" href="https://www.misterspex.de/" target="_blank" rel="noopener">Ab zum Shop ↗</a>
          <div class="note">Hinweis: Der Code wird bei der Buchung eingelöst.</div>
        </div>
      </div>
    </section>
    <section class="card" style="margin-top:24px" data-partner="partner-b" data-fixed-code="FaktorMensch">
      <header class="card__hd">
        <div class="vendor">
          <div class="badge">FM</div>
          <div>
            <h3>Airy - 5% auf Airys mit oder ohne Pflanzen</h3>
            <div class="sub">Exklusiver Vorteil für Versicherte - nicht auf Bundles oder Sensoren, kein Mindestumsatz</div>
          </div>
        </div>
        <div class="logo">
          <img src="https://res.cloudinary.com/ddg5xbi4e/image/upload/v1758893333/Airy_xpbzrs.png" alt="Mister Spex Logo" width="120" />
        </div>
      </header>

      <div class="card__bd">
        <div>
          <div class="steps">
            <div class="step">
              <h4>1. Code sichern</h4>
              <p>Klicke auf „Kopieren“ und füge den Code im Shop/Portal ein.</p>
            </div>
            <div class="step">
              <h4>2. Vorteil aktivieren</h4>
              <p>Der Rabatt wird an der Kasse oder nach Eingabe automatisch verrechnet.</p>
            </div>
          </div>

          <div class="code-box" role="group" aria-label="Rabattcode">
            <div class="code" aria-live="polite">Noch kein Code geladen</div>
            <span class="copied" role="status" style="display:none; font-size:12px; color:var(--ok);">Kopiert!</span>
            <button class="btn" type="button">Code laden</button>
          </div>

          <div class="tip">Tipp: Der Code gilt nur für kurze Zeit.</div>

          <div class="chips">
            <span class="chip">FAKTOR MENSCH‑Benefit</span>
            <span class="chip">Pflanzen</span>
          </div>
        </div>

        <div class="cta">
          <a class="btn-primary" href="https://airy.green/" target="_blank" rel="noopener">Jetzt einlösen ↗</a>
          <div class="note">Hinweis: Der Code wird bei der Buchung eingelöst.</div>
        </div>
      </div>
    </section>
    <h1 class="more-coming">Mehr Vorteile folgen bald. Bleib dran!</h1>
  </div>

  <noscript>
    <p style="color:var(--text-dim); padding:0 20px">Zum Laden/Kopieren des Codes bitte JavaScript aktivieren.</p>
  </noscript>

<script>
  const ENDPOINT = "https://script.google.com/macros/s/AKfycbxDuCxU3Y8-MIUmDOeWGFJlCNfzqRMG7a3wnjPzTt_9M2s06nFlpt3kPJqFtLXkqckGMA/exec";

  function setupCodeBox(box) {
    const codeEl = box.querySelector(".code");
    const actionBtn = box.querySelector("button");
    const copiedEl = box.querySelector(".copied");
    const partner = box.closest('.card')?.dataset.partner || '';
    const fixedCode = box.dataset.fixedCode || box.closest('.card')?.dataset.fixedCode || '';

    let state = "idle";       // "idle" | "loading" | "loaded"
    let currentCode = "";

    // If a fixed code is configured, initialize the UI and skip loading
    if (fixedCode) {
      currentCode = String(fixedCode).trim();
      codeEl.textContent = currentCode;
      state = "loaded";
      actionBtn.textContent = "Kopieren";
    }

    async function loadCode() {
      if (state === "loading") return;
      if (fixedCode) { state = "loaded"; actionBtn.textContent = "Kopieren"; return; }
      state = "loading";
      actionBtn.disabled = true;
      actionBtn.textContent = "Lade…";
      copiedEl.style.display = "none";

      const ctrl = new AbortController();
      const t = setTimeout(() => ctrl.abort(), 7000);

      try {
        const url = partner ? `${ENDPOINT}?partner=${encodeURIComponent(partner)}` : ENDPOINT;
        const res = await fetch(url, { cache: "no-store", signal: ctrl.signal });
        if (!res.ok) throw new Error("Netzwerkfehler");

        // Try to parse JSON first; fallback to plain text
        const ct = res.headers.get("content-type") || "";
        if (ct.includes("application/json")) {
          const payload = await res.json();
          if (payload && payload.ok && payload.code) {
            currentCode = String(payload.code).trim();
            codeEl.textContent = currentCode || "Kein Code erhalten";
            state = currentCode ? "loaded" : "idle";
            actionBtn.textContent = currentCode ? "Kopieren" : "Erneut laden";
          } else if (payload && payload.error === "empty") {
            currentCode = "";
            codeEl.textContent = "Keine Codes mehr verfügbar";
            state = "idle";
            actionBtn.textContent = "Später erneut prüfen";
          } else {
            throw new Error("Unerwartete Antwort");
          }
        } else {
          const code = (await res.text()).trim();
          currentCode = code;
          codeEl.textContent = code || "Kein Code erhalten";
          state = code ? "loaded" : "idle";
          actionBtn.textContent = code ? "Kopieren" : "Erneut laden";
        }
      } catch (e) {
        currentCode = "";
        codeEl.textContent = (e.name === "AbortError") ? "Zeitüberschreitung beim Laden" : "Fehler beim Laden";
        state = "idle";
        actionBtn.textContent = "Erneut laden";
      } finally {
        clearTimeout(t);
        actionBtn.disabled = false;
      }
    }

    async function copyCode() {
      if (!currentCode) return;
      try {
        await navigator.clipboard.writeText(currentCode);
        copiedEl.style.display = "inline";
        setTimeout(()=> copiedEl.style.display="none", 2000);
      } catch {
        const sel = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(codeEl);
        sel.removeAllRanges(); sel.addRange(range);
        copiedEl.textContent = "Markiert – STRG/CMD+C drücken";
        copiedEl.style.display = "inline";
        setTimeout(()=> { copiedEl.style.display="none"; copiedEl.textContent="Kopiert!"; }, 3000);
      }
    }

    actionBtn.addEventListener("click", (ev) => {
      if (fixedCode) {
        return copyCode();
      }
      // Shift+Klick lädt den Code bewusst neu
      if (ev.shiftKey) return loadCode();

      if (state === "loaded") {
        copyCode();
      } else {
        loadCode();
      }
    });

    // Optional: Klick in die Code-Box kopiert ebenfalls (wenn geladen)
    codeEl.addEventListener("click", () => {
      if (state === "loaded") copyCode();
    });
  }

  // Alle vorhandenen Code-Boxen initialisieren
  document.querySelectorAll('.code-box').forEach(setupCodeBox);
</script>
</body>
</html>
